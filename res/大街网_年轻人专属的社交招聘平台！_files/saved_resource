(function(l){var A=l,j=Object.prototype,r=j.toString,k=new Function,o=0,b="constructor";function e(i,d){throw new Error("declare"+(d?" "+d:"")+": "+i)}var x,f,m={};for(var y in {toString:1}){x=[];break}A._extraNames=x=x||["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"];f=x.length;function a(G,F){var d,E,D;for(d in F){E=F[d];if(!(d in G)||(G[d]!==E&&(!(d in m)||m[d]!==E))){G[d]=E}}if(f&&F){for(D=0;D<f;++D){d=x[D];E=F[d];if(!(d in G)||(G[d]!==E&&(!(d in m)||m[d]!==E))){G[d]=E}}}return G}function v(E,F,d){if(F==null||E==null){return d}else{paths=F.split(".");tmp=E;for(var D=0;D<paths.length;D++){if($.trim(paths[D])!=""){tmp=tmp[paths[D]];if(tmp==null){return d}}else{continue}}return tmp}}A._eval=v;A.global=window;A._scopeMap={};A._getProp=function(H,E,D){var G=D||A.global;for(var d=0,F;G&&(F=H[d]);d++){if(d==0&&A._scopeMap[F]){F=A._scopeMap[F]}G=(F in G?G[F]:(E?G[F]={}:undefined))}return G};A.setObject=function(d,D,i){var G=d.split("."),F=G.pop(),E=A._getProp(G,true,i);return E&&F?(E[F]=D):undefined};function n(d,N){var R=[],Q=[{cls:0,refs:[]}],M={},K=1,G=d.length,J=0,I,F,E,P,L,H,D,O;for(;J<G;++J){E=d[J];if(!E){e("mixin #"+J+" is unknown. Did you use dojo.require to pull it in?",N)}else{if(r.call(E)!="[object Function]"){e("mixin #"+J+" is not a callable constructor.",N)}}F=E._meta?E._meta.bases:[E];P=0;for(I=F.length-1;I>=0;--I){L=F[I].prototype;if(!L.hasOwnProperty("declaredClass")){L.declaredClass="uniqName_"+(o++)}D=L.declaredClass;if(!M.hasOwnProperty(D)){M[D]={count:0,refs:[],cls:F[I]};++K}H=M[D];if(P&&P!==H){H.refs.push(P);++P.count}P=H}++P.count;Q[0].refs.push(P)}while(Q.length){P=Q.pop();R.push(P.cls);--K;while(O=P.refs,O.length==1){P=O[0];if(!P||--P.count){P=0;break}R.push(P.cls);--K}if(P){for(J=0,G=O.length;J<G;++J){P=O[J];if(!--P.count){Q.push(P)}}}}if(K){e("can't build consistent linearization",N)}E=d[0];R[0]=E?E._meta&&E===R[R.length-E._meta.bases.length]?E._meta.bases.length:1:0;return R}function C(J,M,H){var D,I,i,F,N,E,G,L,K,d=this._inherited=this._inherited||{};if(typeof J=="string"){D=J;J=M;M=H}H=0;F=J.callee;D=D||F.nom;if(!D){e("can't deduce a name to call inherited()",this.declaredClass)}N=this.constructor._meta;i=N.bases;K=d.p;if(D!=b){if(d.c!==F){K=0;E=i[0];N=E._meta;if(N.hidden[D]!==F){I=N.chains;if(I&&typeof I[D]=="string"){e("calling chained method with inherited: "+D,this.declaredClass)}do{N=E._meta;G=E.prototype;if(N&&(G[D]===F&&G.hasOwnProperty(D)||N.hidden[D]===F)){break}}while(E=i[++K]);K=E?K:-1}}E=i[++K];if(E){G=E.prototype;if(E._meta&&G.hasOwnProperty(D)){H=G[D]}else{L=j[D];do{G=E.prototype;H=G[D];if(H&&(E._meta?G.hasOwnProperty(D):H!==L)){break}}while(E=i[++K])}}H=E&&H||j[D]}else{if(d.c!==F){K=0;N=i[0]._meta;if(N&&N.ctor!==F){I=N.chains;if(!I||I.constructor!=="manual"){e("calling chained constructor with inherited",this.declaredClass)}while(E=i[++K]){N=E._meta;if(N&&N.ctor===F){break}}K=E?K:-1}}while(E=i[++K]){N=E._meta;H=N?N.ctor:E;if(H){break}}H=E&&H}d.c=H;d.p=K;if(H){return M===true?H:H.apply(this,M||J)}}function c(i,d){if(typeof i=="string"){return this.inherited(i,d,true)}return this.inherited(i,true)}function g(E){var d=this.constructor._meta.bases;for(var F=0,D=d.length;F<D;++F){if(d[F]===E){return true}}return this instanceof E}function B(G,F){var D,E=0,d=A._extraNames.length;for(D in F){if(D!=b&&F.hasOwnProperty(D)){G[D]=F[D]}}for(;E<d;++E){D=A._extraNames[E];if(D!=b&&F.hasOwnProperty(D)){G[D]=F[D]}}}function p(H,G){var D,F,E=0,d=A._extraNames.length;for(D in G){F=G[D];if((F!==j[D]||!(D in j))&&D!=b){if(r.call(F)=="[object Function]"){F.nom=D}H[D]=F}}for(;E<d;++E){D=A._extraNames[E];F=G[D];if((F!==j[D]||!(D in j))&&D!=b){if(r.call(F)=="[object Function]"){F.nom=D}H[D]=F}}return H}function z(d){p(this.prototype,d);return this}function q(d,i){return function(){var F=arguments,H=F,G=F[0],K,I,D,E=d.length,J;if(!(this instanceof F.callee)){return s(F)}if(i&&(G&&G.preamble||this.preamble)){J=new Array(d.length);J[0]=F;for(I=0;;){G=F[0];if(G){K=G.preamble;if(K){F=K.apply(this,F)||F}}K=d[I].prototype;K=K.hasOwnProperty("preamble")&&K.preamble;if(K){F=K.apply(this,F)||F}if(++I==E){break}J[I]=F}}for(I=E-1;I>=0;--I){K=d[I];D=K._meta;K=D?D.ctor:K;if(K){K.apply(this,J?J[I]:F)}}K=this.postscript;if(K){K.apply(this,H)}}}function w(d,i){return function(){var D=arguments,F=D,E=D[0],G;if(!(this instanceof D.callee)){return s(D)}if(i){if(E){G=E.preamble;if(G){F=G.apply(this,F)||F}}G=this.preamble;if(G){G.apply(this,F)}}if(d){d.apply(this,D)}G=this.postscript;if(G){G.apply(this,D)}}}function u(d){return function(){var E=arguments,F=0,G,D;if(!(this instanceof E.callee)){return s(E)}for(;G=d[F];++F){D=G._meta;G=D?D.ctor:G;if(G){G.apply(this,E);break}}G=this.postscript;if(G){G.apply(this,E)}}}function t(i,d,D){return function(){var F,E,I,G=0,H=1;if(D){G=d.length-1;H=-1}for(;F=d[G];G+=H){E=F._meta;I=(E?E.hidden:F.prototype)[i];if(I){I.apply(this,arguments)}}}}function h(i){k.prototype=i.prototype;var d=new k;k.prototype=null;return d}function s(d){var D=d.callee,i=h(D);D.apply(i,d);return i}A.declare=function(I,M,J){if(typeof I!="string"){J=M;M=I;I=""}J=J||{};var F,E,N,L,D,d,H,G=1,K=M;if(r.call(M)=="[object Array]"){d=n(M,I);N=d[0];G=d.length-N;M=d[G]}else{d=[0];if(M){if(r.call(M)=="[object Function]"){N=M._meta;d=d.concat(N?N.bases:M)}else{e("base class is not a callable constructor.",I)}}else{if(M!==null){e("unknown base class. Did you use dojo.require to pull it in?",I)}}}if(M){for(E=G-1;;--E){F=h(M);if(!E){break}N=d[E];(N._meta?B:mix)(F,N.prototype);L=new Function;L.superclass=M;L.prototype=F;M=F.constructor=L}}else{F={}}p(F,J);N=J.constructor;if(N!==j.constructor){N.nom=b;F.constructor=N}for(E=G-1;E;--E){N=d[E]._meta;if(N&&N.chains){H=mix(H||{},N.chains)}}if(F["-chains-"]){H=mix(H||{},F["-chains-"])}N=!H||!H.hasOwnProperty(b);d[0]=L=(H&&H.constructor==="manual")?u(d):(d.length==1?w(J.constructor,N):q(d,N));L._meta={bases:d,hidden:J,chains:H,parents:K,ctor:J.constructor};L.superclass=M&&M.prototype;L.extend=z;L.prototype=F;F.constructor=L;F.getInherited=c;F.inherited=C;F.isInstanceOf=g;if(I){F.declaredClass=I;A.setObject(I,L)}if(H){for(D in H){if(F[D]&&typeof H[D]=="string"&&D!=b){N=F[D]=t(D,d,H[D]==="after");N.nom=D}}}return L};A.safeMixin=p})(window);